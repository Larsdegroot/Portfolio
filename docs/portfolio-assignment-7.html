<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 Portfolio assignment 7 | Portfolio of DSFB</title>
  <meta name="description" content="9 Portfolio assignment 7 | Portfolio of DSFB" />
  <meta name="generator" content="bookdown 0.22 and GitBook 2.6.7" />

  <meta property="og:title" content="9 Portfolio assignment 7 | Portfolio of DSFB" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 Portfolio assignment 7 | Portfolio of DSFB" />
  
  
  

<meta name="author" content="Lars de Groot" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="portfolio-assignment-6-2.html"/>
<link rel="next" href="influenzadata-package.html"/>
<script src="libs/header-attrs-2.8/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="c-elegans-plate-experiment.html"><a href="c-elegans-plate-experiment.html"><i class="fa fa-check"></i><b>1</b> <em>C. elegans</em> plate experiment</a></li>
<li class="chapter" data-level="2" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i><b>2</b> References</a></li>
<li class="chapter" data-level="3" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html"><i class="fa fa-check"></i><b>3</b> An exercise in Open science</a>
<ul>
<li class="chapter" data-level="3.1" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html#score"><i class="fa fa-check"></i><b>3.1</b> Score:</a></li>
<li class="chapter" data-level="3.2" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html#explanation"><i class="fa fa-check"></i><b>3.2</b> Explanation:</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="an-exercise-in-reproducibility.html"><a href="an-exercise-in-reproducibility.html"><i class="fa fa-check"></i><b>4</b> An exercise in reproducibility</a></li>
<li class="chapter" data-level="5" data-path="good-workflow-practices-guerrilla-analytics.html"><a href="good-workflow-practices-guerrilla-analytics.html"><i class="fa fa-check"></i><b>5</b> Good Workflow practices: Guerrilla analytics</a></li>
<li class="chapter" data-level="6" data-path="rmarkdown-cv.html"><a href="rmarkdown-cv.html"><i class="fa fa-check"></i><b>6</b> Rmarkdown CV</a></li>
<li class="chapter" data-level="7" data-path="portfolio-assignment-5-b.html"><a href="portfolio-assignment-5-b.html"><i class="fa fa-check"></i><b>7</b> Portfolio assignment 5.B</a></li>
<li class="chapter" data-level="8" data-path="portfolio-assignment-6-2.html"><a href="portfolio-assignment-6-2.html"><i class="fa fa-check"></i><b>8</b> Portfolio assignment 6.2</a></li>
<li class="chapter" data-level="9" data-path="portfolio-assignment-7.html"><a href="portfolio-assignment-7.html"><i class="fa fa-check"></i><b>9</b> Portfolio assignment 7</a></li>
<li class="chapter" data-level="10" data-path="influenzadata-package.html"><a href="influenzadata-package.html"><i class="fa fa-check"></i><b>10</b> InfluenzaData package</a></li>
<li class="chapter" data-level="11" data-path="parametered-rmd.html"><a href="parametered-rmd.html"><i class="fa fa-check"></i><b>11</b> Parametered RMD</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Portfolio of DSFB</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="portfolio-assignment-7" class="section level1" number="9">
<h1><span class="header-section-number">9</span> Portfolio assignment 7</h1>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="portfolio-assignment-7.html#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="fu">here</span>(<span class="st">&quot;src/port_src7.R&quot;</span>))</span></code></pre></div>
<p><strong>1. Load the flu (“./data/flu_data.csv), the dengue (.”/data/dengue_data.csv) and the gapminder ({dslabs} package) into three separate dataframes in R.</strong></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="portfolio-assignment-7.html#cb27-1" aria-hidden="true" tabindex="-1"></a>dengue <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/dengue_data.txt&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>) </span>
<span id="cb27-2"><a href="portfolio-assignment-7.html#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue)</span></code></pre></div>
<pre><code>##         Date Argentina Bolivia Brazil India Indonesia Mexico Philippines Singapore Thailand Venezuela
## 1 2002-12-29        NA   0.101  0.073 0.062     0.101     NA          NA     0.059       NA        NA
## 2 2003-01-05        NA   0.143  0.098 0.047     0.039     NA          NA     0.059       NA        NA
## 3 2003-01-12        NA   0.176  0.119 0.051     0.059  0.071          NA     0.238       NA        NA
## 4 2003-01-19        NA   0.173  0.170 0.032     0.039  0.052          NA     0.175       NA        NA
## 5 2003-01-26        NA   0.146  0.138 0.040     0.112  0.048          NA     0.164       NA        NA
## 6 2003-02-02        NA   0.160  0.202 0.038     0.049  0.041          NA     0.163       NA        NA</code></pre>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="portfolio-assignment-7.html#cb29-1" aria-hidden="true" tabindex="-1"></a>flu <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">&quot;data/flu_data.txt&quot;</span>), <span class="at">skip =</span> <span class="dv">11</span>)</span>
<span id="cb29-2"><a href="portfolio-assignment-7.html#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu)</span></code></pre></div>
<pre><code>##         Date Argentina Australia Austria Belgium Bolivia Brazil Bulgaria Canada Chile France Germany Hungary Japan Mexico
## 1 2002-12-29        NA        NA      NA      NA      NA    174       NA     NA    NA     NA      NA      NA    NA     NA
## 2 2003-01-05        NA        NA      NA      NA      NA    162       NA     NA    NA     NA      NA      NA    NA     NA
## 3 2003-01-12        NA        NA      NA      NA      NA    174       NA     NA     1     NA      NA      NA    NA     NA
## 4 2003-01-19        NA        NA      NA      NA      NA    162       NA     NA     0     NA      NA      NA    NA     NA
## 5 2003-01-26        NA        NA      NA      NA      NA    131       NA     NA     0     NA      NA      NA    NA     NA
## 6 2003-02-02       136        NA      NA      NA      NA    151       NA     NA     0     NA      NA      NA    NA     NA
##   Netherlands New.Zealand Norway Paraguay Peru Poland Romania Russia South.Africa Spain Sweden Switzerland Ukraine United.States
## 1          NA          NA     NA       NA  329     NA      NA     NA           NA    NA     NA          NA      NA            NA
## 2          NA          NA     NA       NA  315     NA      NA     NA           NA    NA     NA          NA      NA            NA
## 3          NA          NA     NA       NA  314     NA      NA     NA           NA    NA     NA          NA      NA            NA
## 4          NA          NA     NA       NA  267     NA      NA     NA           NA    NA     NA          NA      NA            NA
## 5          NA          NA     NA       NA  241     NA      NA     NA           NA    NA     NA          NA      NA            NA
## 6          NA          NA     NA       NA  227     NA      NA     NA           NA    NA     NA          NA      NA            NA
##   Uruguay
## 1      NA
## 2      NA
## 3      NA
## 4      NA
## 5      NA
## 6      NA</code></pre>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="portfolio-assignment-7.html#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(gapminder)</span></code></pre></div>
<pre><code>##               country year infant_mortality life_expectancy fertility population          gdp continent          region
## 1             Albania 1960           115.40           62.87      6.19    1636054           NA    Europe Southern Europe
## 2             Algeria 1960           148.20           47.50      7.65   11124892  13828152297    Africa Northern Africa
## 3              Angola 1960           208.00           35.98      7.32    5270844           NA    Africa   Middle Africa
## 4 Antigua and Barbuda 1960               NA           62.97      4.43      54681           NA  Americas       Caribbean
## 5           Argentina 1960            59.87           65.39      3.11   20619075 108322326649  Americas   South America
## 6             Armenia 1960               NA           66.86      4.55    1867396           NA      Asia    Western Asia</code></pre>
<p><strong>2. Check if they are in the right shape. Is the data in the ‘tidy’ format? If not change the format to ‘tidy’</strong></p>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="portfolio-assignment-7.html#cb33-1" aria-hidden="true" tabindex="-1"></a>dengue <span class="ot">&lt;-</span> dengue <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(Argentina<span class="sc">:</span>Venezuela, <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb33-2"><a href="portfolio-assignment-7.html#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Date       country    value
##   &lt;chr&gt;      &lt;chr&gt;      &lt;dbl&gt;
## 1 2002-12-29 Argentina NA    
## 2 2002-12-29 Bolivia    0.101
## 3 2002-12-29 Brazil     0.073
## 4 2002-12-29 India      0.062
## 5 2002-12-29 Indonesia  0.101
## 6 2002-12-29 Mexico    NA</code></pre>
<div class="sourceCode" id="cb35"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb35-1"><a href="portfolio-assignment-7.html#cb35-1" aria-hidden="true" tabindex="-1"></a>flu <span class="ot">&lt;-</span> flu <span class="sc">%&gt;%</span> <span class="fu">pivot_longer</span>(Argentina<span class="sc">:</span>Uruguay, <span class="at">names_to =</span> <span class="st">&quot;country&quot;</span>, <span class="at">values_to =</span> <span class="st">&quot;value&quot;</span>)</span>
<span id="cb35-2"><a href="portfolio-assignment-7.html#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
##   Date       country   value
##   &lt;chr&gt;      &lt;chr&gt;     &lt;int&gt;
## 1 2002-12-29 Argentina    NA
## 2 2002-12-29 Australia    NA
## 3 2002-12-29 Austria      NA
## 4 2002-12-29 Belgium      NA
## 5 2002-12-29 Bolivia      NA
## 6 2002-12-29 Brazil      174</code></pre>
<p><strong>3. Change the country and date variables of the three tables so that they coincide in terms of data type, class and values</strong></p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="portfolio-assignment-7.html#cb37-1" aria-hidden="true" tabindex="-1"></a>dengue <span class="ot">&lt;-</span> dengue <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="st">&quot;Date&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>) </span>
<span id="cb37-2"><a href="portfolio-assignment-7.html#cb37-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-3"><a href="portfolio-assignment-7.html#cb37-3" aria-hidden="true" tabindex="-1"></a>dengue <span class="ot">&lt;-</span> dengue[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] </span>
<span id="cb37-4"><a href="portfolio-assignment-7.html#cb37-4" aria-hidden="true" tabindex="-1"></a>dengue<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(dengue<span class="sc">$</span>year)</span>
<span id="cb37-5"><a href="portfolio-assignment-7.html#cb37-5" aria-hidden="true" tabindex="-1"></a>dengue<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(dengue<span class="sc">$</span>country)</span>
<span id="cb37-6"><a href="portfolio-assignment-7.html#cb37-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-7"><a href="portfolio-assignment-7.html#cb37-7" aria-hidden="true" tabindex="-1"></a>dengue <span class="ot">&lt;-</span> dengue <span class="sc">%&gt;%</span> </span>
<span id="cb37-8"><a href="portfolio-assignment-7.html#cb37-8" aria-hidden="true" tabindex="-1"></a>            <span class="fu">group_by</span>(year, country) <span class="sc">%&gt;%</span> </span>
<span id="cb37-9"><a href="portfolio-assignment-7.html#cb37-9" aria-hidden="true" tabindex="-1"></a>            <span class="fu">summarise</span>(<span class="st">&quot;country&quot;</span> <span class="ot">=</span> country, <span class="st">&quot;dengue_activity&quot;</span> <span class="ot">=</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb37-10"><a href="portfolio-assignment-7.html#cb37-10" aria-hidden="true" tabindex="-1"></a>            <span class="fu">unique</span>()</span>
<span id="cb37-11"><a href="portfolio-assignment-7.html#cb37-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-12"><a href="portfolio-assignment-7.html#cb37-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dengue)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   year, country [6]
##    year country   dengue_activity
##   &lt;int&gt; &lt;fct&gt;               &lt;dbl&gt;
## 1  2002 Argentina           0    
## 2  2002 Bolivia             0.101
## 3  2002 Brazil              0.073
## 4  2002 India               0.062
## 5  2002 Indonesia           0.101
## 6  2002 Mexico              0</code></pre>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="portfolio-assignment-7.html#cb39-1" aria-hidden="true" tabindex="-1"></a>flu <span class="ot">&lt;-</span> flu <span class="sc">%&gt;%</span> <span class="fu">separate</span>(<span class="st">&quot;Date&quot;</span>, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">&quot;year&quot;</span>, <span class="st">&quot;month&quot;</span>, <span class="st">&quot;day&quot;</span>), <span class="at">sep =</span> <span class="st">&quot;-&quot;</span>) </span>
<span id="cb39-2"><a href="portfolio-assignment-7.html#cb39-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-3"><a href="portfolio-assignment-7.html#cb39-3" aria-hidden="true" tabindex="-1"></a>flu <span class="ot">&lt;-</span> flu[<span class="sc">-</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>)] </span>
<span id="cb39-4"><a href="portfolio-assignment-7.html#cb39-4" aria-hidden="true" tabindex="-1"></a>flu<span class="sc">$</span>year <span class="ot">&lt;-</span> <span class="fu">as.integer</span>(flu<span class="sc">$</span>year)</span>
<span id="cb39-5"><a href="portfolio-assignment-7.html#cb39-5" aria-hidden="true" tabindex="-1"></a>flu<span class="sc">$</span>country <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(flu<span class="sc">$</span>country)</span>
<span id="cb39-6"><a href="portfolio-assignment-7.html#cb39-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-7"><a href="portfolio-assignment-7.html#cb39-7" aria-hidden="true" tabindex="-1"></a>flu <span class="ot">&lt;-</span> flu <span class="sc">%&gt;%</span> </span>
<span id="cb39-8"><a href="portfolio-assignment-7.html#cb39-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">group_by</span>(year, country) <span class="sc">%&gt;%</span> </span>
<span id="cb39-9"><a href="portfolio-assignment-7.html#cb39-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">summarise</span>(<span class="st">&quot;country&quot;</span> <span class="ot">=</span> country, <span class="st">&quot;influenza_activity&quot;</span> <span class="ot">=</span> <span class="fu">sum</span>(value, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span></span>
<span id="cb39-10"><a href="portfolio-assignment-7.html#cb39-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">unique</span>()</span>
<span id="cb39-11"><a href="portfolio-assignment-7.html#cb39-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-12"><a href="portfolio-assignment-7.html#cb39-12" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(flu)</span></code></pre></div>
<pre><code>## # A tibble: 6 x 3
## # Groups:   year, country [6]
##    year country   influenza_activity
##   &lt;int&gt; &lt;fct&gt;                  &lt;int&gt;
## 1  2002 Argentina                  0
## 2  2002 Australia                  0
## 3  2002 Austria                    0
## 4  2002 Belgium                    0
## 5  2002 Bolivia                    0
## 6  2002 Brazil                   174</code></pre>
<p><strong>4. Store the three tables as separate (so six in total) .csv and .rds files.</strong></p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="portfolio-assignment-7.html#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (x <span class="cf">in</span> <span class="fu">c</span>(<span class="st">&quot;flu&quot;</span>, <span class="st">&quot;dengue&quot;</span>, <span class="st">&quot;gapminder&quot;</span>)) {</span>
<span id="cb41-2"><a href="portfolio-assignment-7.html#cb41-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">export</span>(<span class="fu">get</span>(x), <span class="at">path =</span> <span class="fu">paste0</span>(<span class="fu">here</span>(<span class="st">&quot;data//&quot;</span>), x))</span>
<span id="cb41-3"><a href="portfolio-assignment-7.html#cb41-3" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p><strong>5. In Dbeaver create a new PostgreSQL database “workflowsdb”</strong></p>
<div class="sourceCode" id="cb42"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb42-1"><a href="portfolio-assignment-7.html#cb42-1" aria-hidden="true" tabindex="-1"></a>knitr<span class="sc">::</span><span class="fu">include_graphics</span>(<span class="fu">here</span>(<span class="st">&quot;images/workflowsdb_in_Dbeaver.JPG&quot;</span>))</span></code></pre></div>
<div class="figure"><span id="fig:unnamed-chunk-33"></span>
<img src="images/workflowsdb_in_Dbeaver.JPG" alt="The workflows database in Dbeaver."  />
<p class="caption">
Figure 9.1: The workflows database in Dbeaver.
</p>
</div>
<div class="figure">
<img src="C:/" alt="" />
<p class="caption">Workflows database in DBeaver</p>
</div>
<p><strong>6. Using RPostgreSQL, insert the tables into the database.</strong></p>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="portfolio-assignment-7.html#cb43-1" aria-hidden="true" tabindex="-1"></a>psswd <span class="ot">&lt;-</span> <span class="fu">.rs.askForPassword</span>(<span class="st">&quot;Database Password:&quot;</span>)</span>
<span id="cb43-2"><a href="portfolio-assignment-7.html#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="portfolio-assignment-7.html#cb43-3" aria-hidden="true" tabindex="-1"></a>con <span class="ot">&lt;-</span> <span class="fu">dbConnect</span>(RPostgres<span class="sc">::</span><span class="fu">Postgres</span>(), </span>
<span id="cb43-4"><a href="portfolio-assignment-7.html#cb43-4" aria-hidden="true" tabindex="-1"></a>                 <span class="at">dbname =</span> <span class="st">&quot;workflowsdb&quot;</span>, </span>
<span id="cb43-5"><a href="portfolio-assignment-7.html#cb43-5" aria-hidden="true" tabindex="-1"></a>                 <span class="at">host=</span><span class="st">&quot;localhost&quot;</span>, </span>
<span id="cb43-6"><a href="portfolio-assignment-7.html#cb43-6" aria-hidden="true" tabindex="-1"></a>                 <span class="at">port=</span><span class="st">&quot;5432&quot;</span>, </span>
<span id="cb43-7"><a href="portfolio-assignment-7.html#cb43-7" aria-hidden="true" tabindex="-1"></a>                 <span class="at">user=</span><span class="st">&quot;postgres&quot;</span>, </span>
<span id="cb43-8"><a href="portfolio-assignment-7.html#cb43-8" aria-hidden="true" tabindex="-1"></a>                 <span class="at">password=</span>psswd)</span></code></pre></div>
<div class="sourceCode" id="cb44"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb44-1"><a href="portfolio-assignment-7.html#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;dengueDB&quot;</span>, dengue, <span class="at">overwrite =</span> T)</span>
<span id="cb44-2"><a href="portfolio-assignment-7.html#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;fluDB&quot;</span>, flu, <span class="at">overwrite =</span> T)</span>
<span id="cb44-3"><a href="portfolio-assignment-7.html#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminderDB&quot;</span>, gapminder, <span class="at">overwrite =</span> T)</span></code></pre></div>
<p><strong>7. Inspect the contents of the tables with SQL (in DBeaver) and save the SQL script.</strong></p>
<div class="sourceCode" id="cb45"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb45-1"><a href="portfolio-assignment-7.html#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>  <span class="kw">FROM</span> <span class="ot">&quot;dengueDB&quot;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption>
<span id="tab:unnamed-chunk-36">Table 9.1: </span>Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
dengue_activity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:right;">
0.101
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
0.073
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
India
</td>
<td style="text-align:right;">
0.062
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Indonesia
</td>
<td style="text-align:right;">
0.101
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Mexico
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Philippines
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Singapore
</td>
<td style="text-align:right;">
0.059
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Thailand
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Venezuela
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb46"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb46-1"><a href="portfolio-assignment-7.html#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>  <span class="kw">FROM</span> <span class="ot">&quot;fluDB&quot;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption>
<span id="tab:unnamed-chunk-37">Table 9.2: </span>Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:right;">
year
</th>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
influenza_activity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Austria
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Belgium
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
174
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Bulgaria
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
0
</td>
</tr>
<tr>
<td style="text-align:right;">
2002
</td>
<td style="text-align:left;">
France
</td>
<td style="text-align:right;">
0
</td>
</tr>
</tbody>
</table>
</div>
<div class="sourceCode" id="cb47"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb47-1"><a href="portfolio-assignment-7.html#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="op">*</span>  <span class="kw">FROM</span> <span class="ot">&quot;gapminderDB&quot;</span>;</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption>
<span id="tab:unnamed-chunk-38">Table 9.3: </span>Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
infant_mortality
</th>
<th style="text-align:right;">
life_expectancy
</th>
<th style="text-align:right;">
fertility
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
gdp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:left;">
region
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Albania
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
115.40
</td>
<td style="text-align:right;">
62.87
</td>
<td style="text-align:right;">
6.19
</td>
<td style="text-align:right;">
1636054
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Southern Europe
</td>
</tr>
<tr>
<td style="text-align:left;">
Algeria
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
148.20
</td>
<td style="text-align:right;">
47.50
</td>
<td style="text-align:right;">
7.65
</td>
<td style="text-align:right;">
11124892
</td>
<td style="text-align:right;">
13828152297
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:left;">
Northern Africa
</td>
</tr>
<tr>
<td style="text-align:left;">
Angola
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
208.00
</td>
<td style="text-align:right;">
35.98
</td>
<td style="text-align:right;">
7.32
</td>
<td style="text-align:right;">
5270844
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Africa
</td>
<td style="text-align:left;">
Middle Africa
</td>
</tr>
<tr>
<td style="text-align:left;">
Antigua and Barbuda
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
62.97
</td>
<td style="text-align:right;">
4.43
</td>
<td style="text-align:right;">
54681
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
Caribbean
</td>
</tr>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
59.87
</td>
<td style="text-align:right;">
65.39
</td>
<td style="text-align:right;">
3.11
</td>
<td style="text-align:right;">
20619075
</td>
<td style="text-align:right;">
108322326649
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
</tr>
<tr>
<td style="text-align:left;">
Armenia
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
66.86
</td>
<td style="text-align:right;">
4.55
</td>
<td style="text-align:right;">
1867396
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:left;">
Western Asia
</td>
</tr>
<tr>
<td style="text-align:left;">
Aruba
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
65.66
</td>
<td style="text-align:right;">
4.82
</td>
<td style="text-align:right;">
54208
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
Caribbean
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
20.30
</td>
<td style="text-align:right;">
70.87
</td>
<td style="text-align:right;">
3.45
</td>
<td style="text-align:right;">
10292328
</td>
<td style="text-align:right;">
96677859364
</td>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:left;">
Australia and New Zealand
</td>
</tr>
<tr>
<td style="text-align:left;">
Austria
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
37.30
</td>
<td style="text-align:right;">
68.75
</td>
<td style="text-align:right;">
2.70
</td>
<td style="text-align:right;">
7065525
</td>
<td style="text-align:right;">
52392699681
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
</tr>
<tr>
<td style="text-align:left;">
Azerbaijan
</td>
<td style="text-align:right;">
1960
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:right;">
61.33
</td>
<td style="text-align:right;">
5.57
</td>
<td style="text-align:right;">
3897889
</td>
<td style="text-align:right;">
NA
</td>
<td style="text-align:left;">
Asia
</td>
<td style="text-align:left;">
Western Asia
</td>
</tr>
</tbody>
</table>
</div>
<p><strong>8. Inspect the contents of the tables with dplyr (in R) and save a RMarkdown showing what you are doing.</strong></p>
<div class="sourceCode" id="cb48"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb48-1"><a href="portfolio-assignment-7.html#cb48-1" aria-hidden="true" tabindex="-1"></a>db_names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">&quot;fluDB&quot;</span>, <span class="st">&quot;dengueDB&quot;</span>, <span class="st">&quot;gapminderDB&quot;</span>)</span>
<span id="cb48-2"><a href="portfolio-assignment-7.html#cb48-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-3"><a href="portfolio-assignment-7.html#cb48-3" aria-hidden="true" tabindex="-1"></a>tables <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb48-4"><a href="portfolio-assignment-7.html#cb48-4" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> (i <span class="cf">in</span> db_names){</span>
<span id="cb48-5"><a href="portfolio-assignment-7.html#cb48-5" aria-hidden="true" tabindex="-1"></a>   tables[[<span class="fu">paste</span>(i)]] <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(con, i)</span>
<span id="cb48-6"><a href="portfolio-assignment-7.html#cb48-6" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="portfolio-assignment-7.html#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="fu">general_inspection</span>(tables<span class="sc">$</span>fluDB, tables<span class="sc">$</span>fluDB<span class="sc">$</span>year, tables<span class="sc">$</span>fluDB<span class="sc">$</span>influenza_activity)</span></code></pre></div>
<pre><code>## [1] &quot;The data frame tables$fluDB has 3 columns: year, country, influenza_activity&quot;
## [1] &quot;And 406 rows&quot;
##       year        country          influenza_activity
##  Min.   :2002   Length:406         Min.   :     0    
##  1st Qu.:2005   Class :character   1st Qu.:  1696    
##  Median :2008   Mode  :character   Median :  6772    
##  Mean   :2008                      Mean   : 20147    
##  3rd Qu.:2012                      3rd Qu.: 24975    
##  Max.   :2015                      Max.   :155577</code></pre>
<p><img src="_main_files/figure-html/7.8%20inspection-1.png" width="672" /></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="portfolio-assignment-7.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="fu">general_inspection</span>(tables<span class="sc">$</span>dengueDB, tables<span class="sc">$</span>dengueDB<span class="sc">$</span>year, tables<span class="sc">$</span>dengueDB<span class="sc">$</span>dengue_activity)</span></code></pre></div>
<pre><code>## [1] &quot;The data frame tables$dengueDB has 3 columns: year, country, dengue_activity&quot;
## [1] &quot;And 140 rows&quot;
##       year        country          dengue_activity 
##  Min.   :2002   Length:140         Min.   : 0.000  
##  1st Qu.:2005   Class :character   1st Qu.: 2.346  
##  Median :2008   Mode  :character   Median : 5.556  
##  Mean   :2008                      Mean   : 6.217  
##  3rd Qu.:2012                      3rd Qu.: 8.824  
##  Max.   :2015                      Max.   :27.847</code></pre>
<p><img src="_main_files/figure-html/7.8%20inspection-2.png" width="672" /></p>
<div class="sourceCode" id="cb53"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb53-1"><a href="portfolio-assignment-7.html#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="fu">general_inspection</span>(tables<span class="sc">$</span>gapminderDB)</span></code></pre></div>
<pre><code>## [1] &quot;The data frame tables$gapminderDB has 9 columns: country, year, infant_mortality, life_expectancy, fertility, population, gdp, continent, region&quot;
## [1] &quot;And 10545 rows&quot;
##    country               year      infant_mortality life_expectancy   fertility       population             gdp           
##  Length:10545       Min.   :1960   Min.   :  1.50   Min.   :13.20   Min.   :0.840   Min.   :3.124e+04   Min.   :4.040e+07  
##  Class :character   1st Qu.:1974   1st Qu.: 16.00   1st Qu.:57.50   1st Qu.:2.200   1st Qu.:1.333e+06   1st Qu.:1.846e+09  
##  Mode  :character   Median :1988   Median : 41.50   Median :67.54   Median :3.750   Median :5.009e+06   Median :7.794e+09  
##                     Mean   :1988   Mean   : 55.31   Mean   :64.81   Mean   :4.084   Mean   :2.701e+07   Mean   :1.480e+11  
##                     3rd Qu.:2002   3rd Qu.: 85.10   3rd Qu.:73.00   3rd Qu.:6.000   3rd Qu.:1.523e+07   3rd Qu.:5.540e+10  
##                     Max.   :2016   Max.   :276.90   Max.   :83.90   Max.   :9.220   Max.   :1.376e+09   Max.   :1.174e+13  
##                                    NA&#39;s   :1453                     NA&#39;s   :187     NA&#39;s   :185         NA&#39;s   :2972       
##   continent            region         
##  Length:10545       Length:10545      
##  Class :character   Class :character  
##  Mode  :character   Mode  :character  
##                                       
##                                       
##                                       
## </code></pre>
<p><strong>9. Load the gapminder data in R and change the dataframe in such as way that you could join it to dengue and flue.</strong></p>
<div class="sourceCode" id="cb55"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb55-1"><a href="portfolio-assignment-7.html#cb55-1" aria-hidden="true" tabindex="-1"></a>tables<span class="sc">$</span>fluDB<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>##  [1] 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015</code></pre>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="portfolio-assignment-7.html#cb57-1" aria-hidden="true" tabindex="-1"></a>tables<span class="sc">$</span>dengueDB<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>##  [1] 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012 2013 2014 2015</code></pre>
<p>The data of <code>flu</code> and <code>dengue</code> are from the year 2002 untill 2015. while the data of gapminder is from:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="portfolio-assignment-7.html#cb59-1" aria-hidden="true" tabindex="-1"></a>tables<span class="sc">$</span>gapminderDB<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<pre><code>##  [1] 1960 1961 1962 1963 1964 1965 1966 1967 1968 1969 1970 1971 1972 1973 1974 1975 2012 1976 1977 2014 1978 2016 1979 1980 1981
## [26] 1982 1983 1984 1985 1986 1987 1988 1989 1990 1991 1992 1993 1994 1995 1996 1997 1998 1999 2000 2001 2002 2003 2004 2005 2006
## [51] 2007 2008 2009 2010 2011 2013 2015</code></pre>
<p>1960 till 2015. we’ve also seen in 7.8 that the flu data has 406 rows while the dengue data has 140 rows.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="portfolio-assignment-7.html#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># db_names &lt;- c(&quot;tables$fluDB$country&quot;, &quot;tables$dengueDB$country&quot;, &quot;tables$gapminderDB$country&quot;)</span></span>
<span id="cb61-2"><a href="portfolio-assignment-7.html#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="co"># for (i in db_names){</span></span>
<span id="cb61-3"><a href="portfolio-assignment-7.html#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="co">#   amount_factor(get(i)) </span></span>
<span id="cb61-4"><a href="portfolio-assignment-7.html#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># } </span></span>
<span id="cb61-5"><a href="portfolio-assignment-7.html#cb61-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-6"><a href="portfolio-assignment-7.html#cb61-6" aria-hidden="true" tabindex="-1"></a><span class="fu">amount_factor</span>(tables<span class="sc">$</span>fluDB<span class="sc">$</span>country)</span></code></pre></div>
<pre><code>## [1] &quot;tables$fluDB$country has 29 levels:&quot;
##  [1] &quot;Argentina&quot;     &quot;Australia&quot;     &quot;Austria&quot;       &quot;Belgium&quot;       &quot;Bolivia&quot;       &quot;Brazil&quot;        &quot;Bulgaria&quot;     
##  [8] &quot;Canada&quot;        &quot;Chile&quot;         &quot;France&quot;        &quot;Germany&quot;       &quot;Hungary&quot;       &quot;Japan&quot;         &quot;Mexico&quot;       
## [15] &quot;Netherlands&quot;   &quot;New.Zealand&quot;   &quot;Norway&quot;        &quot;Paraguay&quot;      &quot;Peru&quot;          &quot;Poland&quot;        &quot;Romania&quot;      
## [22] &quot;Russia&quot;        &quot;South.Africa&quot;  &quot;Spain&quot;         &quot;Sweden&quot;        &quot;Switzerland&quot;   &quot;Ukraine&quot;       &quot;United.States&quot;
## [29] &quot;Uruguay&quot;</code></pre>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="portfolio-assignment-7.html#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="fu">amount_factor</span>(tables<span class="sc">$</span>dengueDB<span class="sc">$</span>country)</span></code></pre></div>
<pre><code>## [1] &quot;tables$dengueDB$country has 10 levels:&quot;
##  [1] &quot;Argentina&quot;   &quot;Bolivia&quot;     &quot;Brazil&quot;      &quot;India&quot;       &quot;Indonesia&quot;   &quot;Mexico&quot;      &quot;Philippines&quot; &quot;Singapore&quot;  
##  [9] &quot;Thailand&quot;    &quot;Venezuela&quot;</code></pre>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="portfolio-assignment-7.html#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="fu">amount_factor</span>(tables<span class="sc">$</span>gapminderDB<span class="sc">$</span>country)</span></code></pre></div>
<pre><code>## [1] &quot;tables$gapminderDB$country has 185 levels:&quot;
##   [1] &quot;Albania&quot;                        &quot;Algeria&quot;                        &quot;Angola&quot;                        
##   [4] &quot;Antigua and Barbuda&quot;            &quot;Argentina&quot;                      &quot;Armenia&quot;                       
##   [7] &quot;Aruba&quot;                          &quot;Australia&quot;                      &quot;Austria&quot;                       
##  [10] &quot;Azerbaijan&quot;                     &quot;Bahamas&quot;                        &quot;Bahrain&quot;                       
##  [13] &quot;Bangladesh&quot;                     &quot;Barbados&quot;                       &quot;Belarus&quot;                       
##  [16] &quot;Belgium&quot;                        &quot;Belize&quot;                         &quot;Benin&quot;                         
##  [19] &quot;Bhutan&quot;                         &quot;Bolivia&quot;                        &quot;Bosnia and Herzegovina&quot;        
##  [22] &quot;Botswana&quot;                       &quot;Brazil&quot;                         &quot;Brunei&quot;                        
##  [25] &quot;Bulgaria&quot;                       &quot;Burkina Faso&quot;                   &quot;Burundi&quot;                       
##  [28] &quot;Cambodia&quot;                       &quot;Cameroon&quot;                       &quot;Canada&quot;                        
##  [31] &quot;Cape Verde&quot;                     &quot;Central African Republic&quot;       &quot;Chad&quot;                          
##  [34] &quot;Chile&quot;                          &quot;China&quot;                          &quot;Colombia&quot;                      
##  [37] &quot;Comoros&quot;                        &quot;Congo, Dem. Rep.&quot;               &quot;Congo, Rep.&quot;                   
##  [40] &quot;Costa Rica&quot;                     &quot;Cote d&#39;Ivoire&quot;                  &quot;Croatia&quot;                       
##  [43] &quot;Cuba&quot;                           &quot;Cyprus&quot;                         &quot;Czech Republic&quot;                
##  [46] &quot;Denmark&quot;                        &quot;Djibouti&quot;                       &quot;Dominican Republic&quot;            
##  [49] &quot;Ecuador&quot;                        &quot;Egypt&quot;                          &quot;El Salvador&quot;                   
##  [52] &quot;Equatorial Guinea&quot;              &quot;Eritrea&quot;                        &quot;Estonia&quot;                       
##  [55] &quot;Ethiopia&quot;                       &quot;Fiji&quot;                           &quot;Finland&quot;                       
##  [58] &quot;France&quot;                         &quot;French Polynesia&quot;               &quot;Gabon&quot;                         
##  [61] &quot;Gambia&quot;                         &quot;Georgia&quot;                        &quot;Germany&quot;                       
##  [64] &quot;Ghana&quot;                          &quot;Greece&quot;                         &quot;Greenland&quot;                     
##  [67] &quot;Grenada&quot;                        &quot;Guatemala&quot;                      &quot;Guinea&quot;                        
##  [70] &quot;Guinea-Bissau&quot;                  &quot;Guyana&quot;                         &quot;Haiti&quot;                         
##  [73] &quot;Honduras&quot;                       &quot;Hong Kong, China&quot;               &quot;Hungary&quot;                       
##  [76] &quot;Iceland&quot;                        &quot;India&quot;                          &quot;Indonesia&quot;                     
##  [79] &quot;Iran&quot;                           &quot;Iraq&quot;                           &quot;Ireland&quot;                       
##  [82] &quot;Israel&quot;                         &quot;Italy&quot;                          &quot;Jamaica&quot;                       
##  [85] &quot;Japan&quot;                          &quot;Jordan&quot;                         &quot;Kazakhstan&quot;                    
##  [88] &quot;Kenya&quot;                          &quot;Kiribati&quot;                       &quot;Kuwait&quot;                        
##  [91] &quot;Kyrgyz Republic&quot;                &quot;Lao&quot;                            &quot;Latvia&quot;                        
##  [94] &quot;Lebanon&quot;                        &quot;Lesotho&quot;                        &quot;Liberia&quot;                       
##  [97] &quot;Libya&quot;                          &quot;Lithuania&quot;                      &quot;Luxembourg&quot;                    
## [100] &quot;Macao, China&quot;                   &quot;Macedonia, FYR&quot;                 &quot;Madagascar&quot;                    
## [103] &quot;Malawi&quot;                         &quot;Malaysia&quot;                       &quot;Maldives&quot;                      
## [106] &quot;Mali&quot;                           &quot;Malta&quot;                          &quot;Mauritania&quot;                    
## [109] &quot;Mauritius&quot;                      &quot;Mexico&quot;                         &quot;Micronesia, Fed. Sts.&quot;         
## [112] &quot;Moldova&quot;                        &quot;Mongolia&quot;                       &quot;Montenegro&quot;                    
## [115] &quot;Morocco&quot;                        &quot;Mozambique&quot;                     &quot;Namibia&quot;                       
## [118] &quot;Nepal&quot;                          &quot;Netherlands&quot;                    &quot;New Caledonia&quot;                 
## [121] &quot;New Zealand&quot;                    &quot;Nicaragua&quot;                      &quot;Niger&quot;                         
## [124] &quot;Nigeria&quot;                        &quot;Norway&quot;                         &quot;Oman&quot;                          
## [127] &quot;Pakistan&quot;                       &quot;Panama&quot;                         &quot;Papua New Guinea&quot;              
## [130] &quot;Paraguay&quot;                       &quot;Peru&quot;                           &quot;Philippines&quot;                   
## [133] &quot;Poland&quot;                         &quot;Portugal&quot;                       &quot;Puerto Rico&quot;                   
## [136] &quot;Qatar&quot;                          &quot;Romania&quot;                        &quot;Russia&quot;                        
## [139] &quot;Rwanda&quot;                         &quot;Samoa&quot;                          &quot;Saudi Arabia&quot;                  
## [142] &quot;Senegal&quot;                        &quot;Serbia&quot;                         &quot;Seychelles&quot;                    
## [145] &quot;Sierra Leone&quot;                   &quot;Singapore&quot;                      &quot;Slovak Republic&quot;               
## [148] &quot;Slovenia&quot;                       &quot;Solomon Islands&quot;                &quot;South Africa&quot;                  
## [151] &quot;South Korea&quot;                    &quot;Spain&quot;                          &quot;Sri Lanka&quot;                     
## [154] &quot;St. Lucia&quot;                      &quot;St. Vincent and the Grenadines&quot; &quot;Sudan&quot;                         
## [157] &quot;Suriname&quot;                       &quot;Swaziland&quot;                      &quot;Sweden&quot;                        
## [160] &quot;Switzerland&quot;                    &quot;Syria&quot;                          &quot;Tajikistan&quot;                    
## [163] &quot;Tanzania&quot;                       &quot;Thailand&quot;                       &quot;Timor-Leste&quot;                   
## [166] &quot;Togo&quot;                           &quot;Tonga&quot;                          &quot;Trinidad and Tobago&quot;           
## [169] &quot;Tunisia&quot;                        &quot;Turkey&quot;                         &quot;Turkmenistan&quot;                  
## [172] &quot;Uganda&quot;                         &quot;Ukraine&quot;                        &quot;United Arab Emirates&quot;          
## [175] &quot;United Kingdom&quot;                 &quot;United States&quot;                  &quot;Uruguay&quot;                       
## [178] &quot;Uzbekistan&quot;                     &quot;Vanuatu&quot;                        &quot;Venezuela&quot;                     
## [181] &quot;Vietnam&quot;                        &quot;West Bank and Gaza&quot;             &quot;Yemen&quot;                         
## [184] &quot;Zambia&quot;                         &quot;Zimbabwe&quot;</code></pre>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="portfolio-assignment-7.html#cb67-1" aria-hidden="true" tabindex="-1"></a>levelF <span class="ot">&lt;-</span> tables<span class="sc">$</span>fluDB<span class="sc">$</span>country <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> <span class="fu">levels</span>()</span>
<span id="cb67-2"><a href="portfolio-assignment-7.html#cb67-2" aria-hidden="true" tabindex="-1"></a>levelD <span class="ot">&lt;-</span> tables<span class="sc">$</span>dengueDB<span class="sc">$</span>country <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> <span class="fu">levels</span>()</span>
<span id="cb67-3"><a href="portfolio-assignment-7.html#cb67-3" aria-hidden="true" tabindex="-1"></a>levelG <span class="ot">&lt;-</span> tables<span class="sc">$</span>gapminderDB<span class="sc">$</span>country <span class="sc">%&gt;%</span> as.factor <span class="sc">%&gt;%</span> <span class="fu">levels</span>()</span>
<span id="cb67-4"><a href="portfolio-assignment-7.html#cb67-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-5"><a href="portfolio-assignment-7.html#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="fu">common</span>(levelD, levelG)</span></code></pre></div>
<pre><code>##  [1] &quot;Argentina&quot;   &quot;Bolivia&quot;     &quot;Brazil&quot;      &quot;India&quot;       &quot;Indonesia&quot;   &quot;Mexico&quot;      &quot;Philippines&quot; &quot;Singapore&quot;  
##  [9] &quot;Thailand&quot;    &quot;Venezuela&quot;</code></pre>
<p>All the countries in the dengue data set are all also in the gapminder dataset.</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="portfolio-assignment-7.html#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="fu">common</span>(levelD, levelF)</span></code></pre></div>
<pre><code>## [1] &quot;Argentina&quot; &quot;Bolivia&quot;   &quot;Brazil&quot;    &quot;Mexico&quot;</code></pre>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="portfolio-assignment-7.html#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="fu">common</span>(levelF, levelG) <span class="sc">%&gt;%</span> <span class="fu">length</span>()</span></code></pre></div>
<pre><code>##  [1] &quot;Argentina&quot;   &quot;Australia&quot;   &quot;Austria&quot;     &quot;Belgium&quot;     &quot;Bolivia&quot;     &quot;Brazil&quot;      &quot;Bulgaria&quot;    &quot;Canada&quot;     
##  [9] &quot;Chile&quot;       &quot;France&quot;      &quot;Germany&quot;     &quot;Hungary&quot;     &quot;Japan&quot;       &quot;Mexico&quot;      &quot;Netherlands&quot; &quot;Norway&quot;     
## [17] &quot;Paraguay&quot;    &quot;Peru&quot;        &quot;Poland&quot;      &quot;Romania&quot;     &quot;Russia&quot;      &quot;Spain&quot;       &quot;Sweden&quot;      &quot;Switzerland&quot;
## [25] &quot;Ukraine&quot;     &quot;Uruguay&quot;</code></pre>
<pre><code>## [1] 26</code></pre>
<p>but the flu data set only has in common with the dengue data set.</p>
<p>If the tables are to be joined they need to have data about only the countries and years equal to the counties and years that the tables have in common. Or the tables need to be joined in a way that <code>NA</code> is introduced where necessary.</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="portfolio-assignment-7.html#cb74-1" aria-hidden="true" tabindex="-1"></a>gapminder_02_15 <span class="ot">&lt;-</span> tables<span class="sc">$</span>gapminderDB <span class="sc">%&gt;%</span> <span class="fu">filter</span>(<span class="fu">between</span>(year, <span class="dv">2002</span>, <span class="dv">2015</span>))</span></code></pre></div>
<p><strong>10. Save this clean gapminder data in the “workflowsdb” database</strong></p>
<div class="sourceCode" id="cb75"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb75-1"><a href="portfolio-assignment-7.html#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbWriteTable</span>(con, <span class="st">&quot;gapminder_02_15DB&quot;</span>, gapminder_02_15, <span class="at">overwrite =</span> T)</span></code></pre></div>
<p><strong>11. Perform some joins (your choice) with SQL (can be done in DBeaver or with dplyr).</strong></p>
<div class="sourceCode" id="cb76"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb76-1"><a href="portfolio-assignment-7.html#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="kw">SELECT</span> <span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="op">*</span>, <span class="ot">&quot;fluDB&quot;</span>.influenza_activity, <span class="ot">&quot;dengueDB&quot;</span>.dengue_activity </span>
<span id="cb76-2"><a href="portfolio-assignment-7.html#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="ot">&quot;gapminder_02_15DB&quot;</span></span>
<span id="cb76-3"><a href="portfolio-assignment-7.html#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="ot">&quot;fluDB&quot;</span> <span class="kw">ON</span> <span class="kw">public</span>.<span class="ot">&quot;fluDB&quot;</span>.<span class="dt">year</span> <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="dt">year</span> </span>
<span id="cb76-4"><a href="portfolio-assignment-7.html#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> <span class="kw">public</span>.<span class="ot">&quot;fluDB&quot;</span>.country <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.country</span>
<span id="cb76-5"><a href="portfolio-assignment-7.html#cb76-5" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="ot">&quot;dengueDB&quot;</span> <span class="kw">ON</span> <span class="kw">public</span>.<span class="ot">&quot;dengueDB&quot;</span>.<span class="dt">year</span> <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="dt">year</span></span>
<span id="cb76-6"><a href="portfolio-assignment-7.html#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> <span class="kw">public</span>.<span class="ot">&quot;dengueDB&quot;</span>.country <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.country</span></code></pre></div>
<div class="knitsql-table">
<table>
<caption>
<span id="tab:unnamed-chunk-47">Table 9.4: </span>Displaying records 1 - 10
</caption>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:right;">
year
</th>
<th style="text-align:right;">
infant_mortality
</th>
<th style="text-align:right;">
life_expectancy
</th>
<th style="text-align:right;">
fertility
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
gdp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
influenza_activity
</th>
<th style="text-align:right;">
dengue_activity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
17.1
</td>
<td style="text-align:right;">
74.3
</td>
<td style="text-align:right;">
2.38
</td>
<td style="text-align:right;">
37889443
</td>
<td style="text-align:right;">
2.420762e+11
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
80.3
</td>
<td style="text-align:right;">
1.76
</td>
<td style="text-align:right;">
19514385
</td>
<td style="text-align:right;">
4.421354e+11
</td>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:left;">
Australia and New Zealand
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Austria
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
78.8
</td>
<td style="text-align:right;">
1.39
</td>
<td style="text-align:right;">
8114698
</td>
<td style="text-align:right;">
1.969986e+11
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Belgium
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
78.2
</td>
<td style="text-align:right;">
1.68
</td>
<td style="text-align:right;">
10364613
</td>
<td style="text-align:right;">
2.377417e+11
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
53.7
</td>
<td style="text-align:right;">
68.7
</td>
<td style="text-align:right;">
3.98
</td>
<td style="text-align:right;">
8653343
</td>
<td style="text-align:right;">
8.751510e+09
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.101
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
24.3
</td>
<td style="text-align:right;">
71.4
</td>
<td style="text-align:right;">
2.26
</td>
<td style="text-align:right;">
181045592
</td>
<td style="text-align:right;">
6.705127e+11
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
174
</td>
<td style="text-align:right;">
0.073
</td>
</tr>
<tr>
<td style="text-align:left;">
Bulgaria
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
16.3
</td>
<td style="text-align:right;">
72.1
</td>
<td style="text-align:right;">
1.22
</td>
<td style="text-align:right;">
7869124
</td>
<td style="text-align:right;">
1.406418e+10
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Eastern Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Canada
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
5.3
</td>
<td style="text-align:right;">
79.6
</td>
<td style="text-align:right;">
1.51
</td>
<td style="text-align:right;">
31288572
</td>
<td style="text-align:right;">
7.594286e+11
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
Northern America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Chile
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
8.3
</td>
<td style="text-align:right;">
77.7
</td>
<td style="text-align:right;">
2.01
</td>
<td style="text-align:right;">
15544554
</td>
<td style="text-align:right;">
7.944855e+10
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
France
</td>
<td style="text-align:right;">
2002
</td>
<td style="text-align:right;">
4.2
</td>
<td style="text-align:right;">
79.4
</td>
<td style="text-align:right;">
1.87
</td>
<td style="text-align:right;">
60075783
</td>
<td style="text-align:right;">
1.363229e+12
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
</tbody>
</table>
</div>
<p><strong>12. Generate a joined table, and export this from the database to R.</strong></p>
<div class="sourceCode" id="cb77"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb77-1"><a href="portfolio-assignment-7.html#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> joined_gapfluden </span>
<span id="cb77-2"><a href="portfolio-assignment-7.html#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="kw">AS</span> <span class="kw">SELECT</span> <span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="op">*</span>, <span class="ot">&quot;fluDB&quot;</span>.influenza_activity, <span class="ot">&quot;dengueDB&quot;</span>.dengue_activity </span>
<span id="cb77-3"><a href="portfolio-assignment-7.html#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="kw">FROM</span> <span class="ot">&quot;gapminder_02_15DB&quot;</span></span>
<span id="cb77-4"><a href="portfolio-assignment-7.html#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="ot">&quot;fluDB&quot;</span> <span class="kw">ON</span> <span class="kw">public</span>.<span class="ot">&quot;fluDB&quot;</span>.<span class="dt">year</span> <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="dt">year</span> </span>
<span id="cb77-5"><a href="portfolio-assignment-7.html#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> <span class="kw">public</span>.<span class="ot">&quot;fluDB&quot;</span>.country <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.country</span>
<span id="cb77-6"><a href="portfolio-assignment-7.html#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="kw">LEFT</span> <span class="kw">JOIN</span> <span class="ot">&quot;dengueDB&quot;</span> <span class="kw">ON</span> <span class="kw">public</span>.<span class="ot">&quot;dengueDB&quot;</span>.<span class="dt">year</span> <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.<span class="dt">year</span></span>
<span id="cb77-7"><a href="portfolio-assignment-7.html#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="kw">AND</span> <span class="kw">public</span>.<span class="ot">&quot;dengueDB&quot;</span>.country <span class="op">=</span> <span class="kw">public</span>.<span class="ot">&quot;gapminder_02_15DB&quot;</span>.country</span></code></pre></div>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="portfolio-assignment-7.html#cb78-1" aria-hidden="true" tabindex="-1"></a>joined_gapfluden <span class="ot">&lt;-</span> <span class="fu">dbReadTable</span>(<span class="at">conn =</span> con, <span class="st">&quot;joined_gapfluden&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="portfolio-assignment-7.html#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="fu">dbDisconnect</span>(con)</span></code></pre></div>
<p><strong>13. Show some descriptive statistics with this table, and at least 3 visualizations using ggplot2.</strong></p>
<p>The joined dataset contains data about <code>R joined_gapfluden["country"] %&gt;% unique() %&gt;% count() %&gt;% pull()</code> different countries, during the time period from <code>R joined_gapfluden["year"] %&gt;% min</code> until <code>R joined_gapfluden["year"] %&gt;% max</code>. And also the influenza cases per country during this time.</p>
<div class="sourceCode" id="cb80"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb80-1"><a href="portfolio-assignment-7.html#cb80-1" aria-hidden="true" tabindex="-1"></a>joined_gapfluden<span class="sc">$</span>country <span class="ot">&lt;-</span> joined_gapfluden<span class="sc">$</span>country <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb80-2"><a href="portfolio-assignment-7.html#cb80-2" aria-hidden="true" tabindex="-1"></a>joined_gapfluden<span class="sc">$</span>year <span class="ot">&lt;-</span> joined_gapfluden<span class="sc">$</span>year <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb80-3"><a href="portfolio-assignment-7.html#cb80-3" aria-hidden="true" tabindex="-1"></a>joined_gapfluden<span class="sc">$</span>continent <span class="ot">&lt;-</span> joined_gapfluden<span class="sc">$</span>continent <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span>
<span id="cb80-4"><a href="portfolio-assignment-7.html#cb80-4" aria-hidden="true" tabindex="-1"></a>joined_gapfluden<span class="sc">$</span>region <span class="ot">&lt;-</span> joined_gapfluden<span class="sc">$</span>region <span class="sc">%&gt;%</span> <span class="fu">as.factor</span>()</span></code></pre></div>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="portfolio-assignment-7.html#cb81-1" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kable</span>(<span class="fu">head</span>(joined_gapfluden))</span></code></pre></div>
<table>
<thead>
<tr>
<th style="text-align:left;">
country
</th>
<th style="text-align:left;">
year
</th>
<th style="text-align:right;">
infant_mortality
</th>
<th style="text-align:right;">
life_expectancy
</th>
<th style="text-align:right;">
fertility
</th>
<th style="text-align:right;">
population
</th>
<th style="text-align:right;">
gdp
</th>
<th style="text-align:left;">
continent
</th>
<th style="text-align:left;">
region
</th>
<th style="text-align:right;">
influenza_activity
</th>
<th style="text-align:right;">
dengue_activity
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Argentina
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
17.1
</td>
<td style="text-align:right;">
74.3
</td>
<td style="text-align:right;">
2.38
</td>
<td style="text-align:right;">
37889443
</td>
<td style="text-align:right;">
242076212334
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.000
</td>
</tr>
<tr>
<td style="text-align:left;">
Australia
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
5.0
</td>
<td style="text-align:right;">
80.3
</td>
<td style="text-align:right;">
1.76
</td>
<td style="text-align:right;">
19514385
</td>
<td style="text-align:right;">
442135393399
</td>
<td style="text-align:left;">
Oceania
</td>
<td style="text-align:left;">
Australia and New Zealand
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Austria
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
78.8
</td>
<td style="text-align:right;">
1.39
</td>
<td style="text-align:right;">
8114698
</td>
<td style="text-align:right;">
196998621885
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Belgium
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
4.4
</td>
<td style="text-align:right;">
78.2
</td>
<td style="text-align:right;">
1.68
</td>
<td style="text-align:right;">
10364613
</td>
<td style="text-align:right;">
237741668285
</td>
<td style="text-align:left;">
Europe
</td>
<td style="text-align:left;">
Western Europe
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
NA
</td>
</tr>
<tr>
<td style="text-align:left;">
Bolivia
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
53.7
</td>
<td style="text-align:right;">
68.7
</td>
<td style="text-align:right;">
3.98
</td>
<td style="text-align:right;">
8653343
</td>
<td style="text-align:right;">
8751510220
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
0
</td>
<td style="text-align:right;">
0.101
</td>
</tr>
<tr>
<td style="text-align:left;">
Brazil
</td>
<td style="text-align:left;">
2002
</td>
<td style="text-align:right;">
24.3
</td>
<td style="text-align:right;">
71.4
</td>
<td style="text-align:right;">
2.26
</td>
<td style="text-align:right;">
181045592
</td>
<td style="text-align:right;">
670512665737
</td>
<td style="text-align:left;">
Americas
</td>
<td style="text-align:left;">
South America
</td>
<td style="text-align:right;">
174
</td>
<td style="text-align:right;">
0.073
</td>
</tr>
</tbody>
</table>
<p>Influenza, commonly called the flu, is an infectious disease caused by The influenza virus. Symptoms can be quite mild; fever, runny nose, sore throat. Or severe pneumonia.</p>
<p>in 2009 a strain of influenza, the H1N1 influenza strain caused a pandemic known as the swine flu.</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb82-1"><a href="portfolio-assignment-7.html#cb82-1" aria-hidden="true" tabindex="-1"></a>joined_gapfluden <span class="sc">%&gt;%</span> </span>
<span id="cb82-2"><a href="portfolio-assignment-7.html#cb82-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span> year, <span class="at">y =</span> influenza_activity, <span class="at">group =</span> country, <span class="at">fill =</span> country)) <span class="sc">+</span></span>
<span id="cb82-3"><a href="portfolio-assignment-7.html#cb82-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_area</span>(<span class="at">alpha =</span> <span class="fl">0.7</span>, <span class="at">size =</span> <span class="fl">0.4</span>, <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>) <span class="sc">+</span></span>
<span id="cb82-4"><a href="portfolio-assignment-7.html#cb82-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>() <span class="sc">+</span> <span class="co">#or theme_ft_rc()</span></span>
<span id="cb82-5"><a href="portfolio-assignment-7.html#cb82-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">discrete =</span> T) <span class="sc">+</span> </span>
<span id="cb82-6"><a href="portfolio-assignment-7.html#cb82-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_x_discrete</span>(<span class="at">guide =</span> <span class="fu">guide_axis</span>(<span class="at">n.dodge=</span><span class="dv">2</span>))<span class="sc">+</span></span>
<span id="cb82-7"><a href="portfolio-assignment-7.html#cb82-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;influenza cases per country&quot;</span>, <span class="at">y =</span> <span class="st">&quot;influenza cases&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-53-1.png" width="768" /></p>
<p>Global cases peaked in 2009 at 586671.</p>
<p>Some countries had more influenza cases realtive to their population during the peak than others.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="portfolio-assignment-7.html#cb83-1" aria-hidden="true" tabindex="-1"></a>relative_influenza_2009 <span class="ot">&lt;-</span> joined_gapfluden <span class="sc">%&gt;%</span> </span>
<span id="cb83-2"><a href="portfolio-assignment-7.html#cb83-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(continent <span class="sc">==</span> <span class="st">&quot;Europe&quot;</span>, year <span class="sc">==</span> <span class="st">&quot;2009&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb83-3"><a href="portfolio-assignment-7.html#cb83-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(country, population, influenza_activity) <span class="sc">%&gt;%</span> </span>
<span id="cb83-4"><a href="portfolio-assignment-7.html#cb83-4" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">mutate</span>(<span class="at">relative_influenza_cases =</span> (influenza_activity <span class="sc">/</span> population)<span class="sc">*</span><span class="dv">100</span>)</span>
<span id="cb83-5"><a href="portfolio-assignment-7.html#cb83-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-6"><a href="portfolio-assignment-7.html#cb83-6" aria-hidden="true" tabindex="-1"></a>regions <span class="ot">&lt;-</span> relative_influenza_2009<span class="sc">$</span>country</span>
<span id="cb83-7"><a href="portfolio-assignment-7.html#cb83-7" aria-hidden="true" tabindex="-1"></a><span class="co">#remove Russia because it takes up too much space in the map</span></span>
<span id="cb83-8"><a href="portfolio-assignment-7.html#cb83-8" aria-hidden="true" tabindex="-1"></a>regions <span class="ot">&lt;-</span> regions[<span class="sc">-</span><span class="dv">11</span>]</span>
<span id="cb83-9"><a href="portfolio-assignment-7.html#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="portfolio-assignment-7.html#cb83-10" aria-hidden="true" tabindex="-1"></a>map_data_eu <span class="ot">&lt;-</span> <span class="fu">map_data</span>(<span class="st">&quot;world&quot;</span>, <span class="at">region =</span> regions)</span>
<span id="cb83-11"><a href="portfolio-assignment-7.html#cb83-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-12"><a href="portfolio-assignment-7.html#cb83-12" aria-hidden="true" tabindex="-1"></a>relative_influenza_2009 <span class="ot">&lt;-</span> relative_influenza_2009 <span class="sc">%&gt;%</span> <span class="fu">filter</span>(country <span class="sc">!=</span> <span class="st">&quot;Russia&quot;</span>)</span>
<span id="cb83-13"><a href="portfolio-assignment-7.html#cb83-13" aria-hidden="true" tabindex="-1"></a><span class="co">#renaming for left join</span></span>
<span id="cb83-14"><a href="portfolio-assignment-7.html#cb83-14" aria-hidden="true" tabindex="-1"></a>relative_influenza_2009 <span class="ot">&lt;-</span> <span class="fu">rename</span>(relative_influenza_2009, <span class="at">region =</span> country)</span>
<span id="cb83-15"><a href="portfolio-assignment-7.html#cb83-15" aria-hidden="true" tabindex="-1"></a>map_data_eu <span class="ot">&lt;-</span> <span class="fu">left_join</span>(relative_influenza_2009, map_data_eu, <span class="at">by =</span> <span class="st">&quot;region&quot;</span>)</span>
<span id="cb83-16"><a href="portfolio-assignment-7.html#cb83-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-17"><a href="portfolio-assignment-7.html#cb83-17" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(map_data_eu, <span class="fu">aes</span>(<span class="at">x =</span> long, <span class="at">y =</span> lat)) <span class="sc">+</span></span>
<span id="cb83-18"><a href="portfolio-assignment-7.html#cb83-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_polygon</span>(<span class="fu">aes</span>(<span class="at">group =</span> group, <span class="at">fill =</span> relative_influenza_cases), <span class="at">colour =</span> <span class="st">&quot;white&quot;</span>, <span class="at">size =</span> <span class="fl">0.1</span>) <span class="sc">+</span></span>
<span id="cb83-19"><a href="portfolio-assignment-7.html#cb83-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_void</span>() <span class="sc">+</span> <span class="co">#maybe a dark theme?</span></span>
<span id="cb83-20"><a href="portfolio-assignment-7.html#cb83-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_viridis</span>(<span class="at">option =</span> <span class="st">&quot;E&quot;</span>) <span class="sc">+</span> </span>
<span id="cb83-21"><a href="portfolio-assignment-7.html#cb83-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">&quot;Influenza Activity in europe&quot;</span>,</span>
<span id="cb83-22"><a href="portfolio-assignment-7.html#cb83-22" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">&quot;relative influenza activity&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-54-1.png" width="672" /></p>
<p>It is visible that Austria was had a relatively high influenza activity. Could this have effected life expectancy in Austria?</p>
<div class="sourceCode" id="cb84"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb84-1"><a href="portfolio-assignment-7.html#cb84-1" aria-hidden="true" tabindex="-1"></a>joined_gapfluden <span class="sc">%&gt;%</span></span>
<span id="cb84-2"><a href="portfolio-assignment-7.html#cb84-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Austria&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb84-3"><a href="portfolio-assignment-7.html#cb84-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>() <span class="sc">+</span></span>
<span id="cb84-4"><a href="portfolio-assignment-7.html#cb84-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> life_expectancy), <span class="at">group =</span> <span class="dv">1</span>, <span class="at">size =</span> <span class="dv">1</span>) <span class="sc">+</span></span>
<span id="cb84-5"><a href="portfolio-assignment-7.html#cb84-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_line</span>(<span class="fu">aes</span>(<span class="at">x =</span> year, <span class="at">y =</span> influenza_activity<span class="sc">/</span><span class="dv">500</span>), <span class="at">group =</span> <span class="dv">1</span>, <span class="at">inherit.aes =</span> F, <span class="at">size =</span> <span class="dv">1</span>, <span class="at">color =</span> <span class="st">&quot;red&quot;</span>) <span class="sc">+</span></span>
<span id="cb84-6"><a href="portfolio-assignment-7.html#cb84-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(</span>
<span id="cb84-7"><a href="portfolio-assignment-7.html#cb84-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">name =</span> <span class="st">&quot;Life Expectancy in years&quot;</span>,</span>
<span id="cb84-8"><a href="portfolio-assignment-7.html#cb84-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">sec.axis =</span> <span class="fu">sec_axis</span>(<span class="sc">~</span>.<span class="sc">*</span><span class="dv">500</span>, <span class="at">name =</span> <span class="st">&quot;Influenza cases&quot;</span>)</span>
<span id="cb84-9"><a href="portfolio-assignment-7.html#cb84-9" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">+</span></span>
<span id="cb84-10"><a href="portfolio-assignment-7.html#cb84-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_ipsum</span>()</span></code></pre></div>
<p><img src="_main_files/figure-html/unnamed-chunk-55-1.png" width="768" /></p>

</div>
            </section>

          </div>
        </div>
      </div>
<a href="portfolio-assignment-6-2.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="influenzadata-package.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
