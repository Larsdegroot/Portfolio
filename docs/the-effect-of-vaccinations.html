<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>9 The effect of vaccinations | Portfolio</title>
  <meta name="description" content="9 The effect of vaccinations | Portfolio" />
  <meta name="generator" content="bookdown 0.23 and GitBook 2.6.7" />

  <meta property="og:title" content="9 The effect of vaccinations | Portfolio" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="9 The effect of vaccinations | Portfolio" />
  
  
  

<meta name="author" content="Lars de Groot" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="influenzadata-package.html"/>

<script src="libs/header-attrs-2.10/header-attrs.js"></script>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />









<link href="libs/anchor-sections-1.0.1/anchor-sections.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.0.1/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Welcome</a></li>
<li class="chapter" data-level="2" data-path="c.-elegans-plate-experiment.html"><a href="c.-elegans-plate-experiment.html"><i class="fa fa-check"></i><b>2</b> <em>C. elegans</em> plate experiment</a></li>
<li class="chapter" data-level="3" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html"><i class="fa fa-check"></i><b>3</b> An exercise in Open science</a>
<ul>
<li class="chapter" data-level="3.1" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html#score"><i class="fa fa-check"></i><b>3.1</b> Score:</a></li>
<li class="chapter" data-level="3.2" data-path="an-exercise-in-open-science.html"><a href="an-exercise-in-open-science.html#explanation"><i class="fa fa-check"></i><b>3.2</b> Explanation:</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="an-exercise-in-reproducibility.html"><a href="an-exercise-in-reproducibility.html"><i class="fa fa-check"></i><b>4</b> An exercise in reproducibility</a></li>
<li class="chapter" data-level="5" data-path="good-workflow-practices-guerrilla-analytics.html"><a href="good-workflow-practices-guerrilla-analytics.html"><i class="fa fa-check"></i><b>5</b> Good Workflow practices: Guerrilla analytics</a></li>
<li class="chapter" data-level="6" data-path="learning-python.html"><a href="learning-python.html"><i class="fa fa-check"></i><b>6</b> Learning Python</a>
<ul>
<li class="chapter" data-level="6.1" data-path="learning-python.html"><a href="learning-python.html#rosalind-exercises"><i class="fa fa-check"></i><b>6.1</b> Rosalind exercises:</a>
<ul>
<li class="chapter" data-level="6.1.1" data-path="learning-python.html"><a href="learning-python.html#q1-counting-dna-nucleotides"><i class="fa fa-check"></i><b>6.1.1</b> Q1 Counting DNA nucleotides</a></li>
<li class="chapter" data-level="6.1.2" data-path="learning-python.html"><a href="learning-python.html#q2-transcribing-dna-into-rna"><i class="fa fa-check"></i><b>6.1.2</b> Q2 Transcribing DNA into RNA</a></li>
<li class="chapter" data-level="6.1.3" data-path="learning-python.html"><a href="learning-python.html#q3-complementing-a-strand-of-dna"><i class="fa fa-check"></i><b>6.1.3</b> Q3 Complementing a Strand of DNA</a></li>
<li class="chapter" data-level="6.1.4" data-path="learning-python.html"><a href="learning-python.html#q4-rabbits-and-recurrence-relations"><i class="fa fa-check"></i><b>6.1.4</b> Q4 : Rabbits and Recurrence Relations</a></li>
<li class="chapter" data-level="6.1.5" data-path="learning-python.html"><a href="learning-python.html#q5-computing-gc-content"><i class="fa fa-check"></i><b>6.1.5</b> Q5: Computing GC Content</a></li>
<li class="chapter" data-level="6.1.6" data-path="learning-python.html"><a href="learning-python.html#q6-counting-point-mutations"><i class="fa fa-check"></i><b>6.1.6</b> Q6: Counting point mutations</a></li>
<li class="chapter" data-level="6.1.7" data-path="learning-python.html"><a href="learning-python.html#q7-mendels-first-law"><i class="fa fa-check"></i><b>6.1.7</b> Q7 Mendels first law</a></li>
<li class="chapter" data-level="6.1.8" data-path="learning-python.html"><a href="learning-python.html#q8-translating-rna-into-protein"><i class="fa fa-check"></i><b>6.1.8</b> Q8: Translating RNA into Protein</a></li>
<li class="chapter" data-level="6.1.9" data-path="learning-python.html"><a href="learning-python.html#q9-finding-a-motif-in-dna"><i class="fa fa-check"></i><b>6.1.9</b> Q9: Finding a Motif in DNA</a></li>
<li class="chapter" data-level="6.1.10" data-path="learning-python.html"><a href="learning-python.html#q10-consensus-and-profile"><i class="fa fa-check"></i><b>6.1.10</b> Q10: Consensus and Profile</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="7" data-path="influenza-activity-across-europe.html"><a href="influenza-activity-across-europe.html"><i class="fa fa-check"></i><b>7</b> Influenza activity across europe</a>
<ul>
<li class="chapter" data-level="7.1" data-path="influenza-activity-across-europe.html"><a href="influenza-activity-across-europe.html#loading-and-colapsing-data"><i class="fa fa-check"></i><b>7.1</b> Loading and colapsing data</a></li>
<li class="chapter" data-level="7.2" data-path="influenza-activity-across-europe.html"><a href="influenza-activity-across-europe.html#storing-new-dataframes"><i class="fa fa-check"></i><b>7.2</b> Storing new dataframes</a></li>
<li class="chapter" data-level="7.3" data-path="influenza-activity-across-europe.html"><a href="influenza-activity-across-europe.html#joining-dataset"><i class="fa fa-check"></i><b>7.3</b> Joining dataset</a></li>
<li class="chapter" data-level="7.4" data-path="influenza-activity-across-europe.html"><a href="influenza-activity-across-europe.html#visualizing-data"><i class="fa fa-check"></i><b>7.4</b> Visualizing data</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="influenzadata-package.html"><a href="influenzadata-package.html"><i class="fa fa-check"></i><b>8</b> InfluenzaData package</a></li>
<li class="chapter" data-level="9" data-path="the-effect-of-vaccinations.html"><a href="the-effect-of-vaccinations.html"><i class="fa fa-check"></i><b>9</b> The effect of vaccinations</a>
<ul>
<li class="chapter" data-level="9.1" data-path="the-effect-of-vaccinations.html"><a href="the-effect-of-vaccinations.html#trimming-joining-dataframes"><i class="fa fa-check"></i><b>9.1</b> Trimming &amp; Joining dataframes</a></li>
<li class="chapter" data-level="9.2" data-path="the-effect-of-vaccinations.html"><a href="the-effect-of-vaccinations.html#visualization"><i class="fa fa-check"></i><b>9.2</b> Visualization</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Portfolio</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="the-effect-of-vaccinations" class="section level1" number="9">
<h1><span class="header-section-number">9</span> The effect of vaccinations</h1>
<p>in January of 2020 the first covid-19 cases where confirmed in Wuhan, Hubei, China. The SARS-COV-19 virus then continued to spread across the world. By now we have all lived through the effects of the SARS-COV-19. However with vaccinations programs now gaining speed in America, European countries, most of Asia-Pacific and starting in Africa, the SARS-COV-19 Pandemic seems to be coming to an end. In this report i want to show the effect of vaccination programs, and highlight certain events and their effect on the spread of SARS-COV-19.</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="the-effect-of-vaccinations.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(tidyverse)</span>
<span id="cb98-2"><a href="the-effect-of-vaccinations.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">require</span>(readxl)</span>
<span id="cb98-3"><a href="the-effect-of-vaccinations.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(utils)</span>
<span id="cb98-4"><a href="the-effect-of-vaccinations.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span>
<span id="cb98-5"><a href="the-effect-of-vaccinations.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(captioner)</span>
<span id="cb98-6"><a href="the-effect-of-vaccinations.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span></code></pre></div>
<p>The European Centre for Disease Prevention and Control (ECDC) provides dataset for vaccination rates and covid-19 cases and associated deaths.</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="the-effect-of-vaccinations.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co"># data_daily_cases &lt;- read.csv(&quot;https://opendata.ecdc.europa.eu/covid19/nationalcasedeath_eueea_daily_ei/csv&quot;, na.strings = &quot;&quot;, fileEncoding = &quot;UTF-8-BOM&quot;) # date of access: </span></span>
<span id="cb99-2"><a href="the-effect-of-vaccinations.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="the-effect-of-vaccinations.html#cb99-3" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv</span>(<span class="st">&quot;https://opendata.ecdc.europa.eu/covid19/testing/csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8-BOM&quot;</span>) <span class="co"># date of access: </span></span>
<span id="cb99-4"><a href="the-effect-of-vaccinations.html#cb99-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-5"><a href="the-effect-of-vaccinations.html#cb99-5" aria-hidden="true" tabindex="-1"></a>data_hospital <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv</span>(<span class="st">&quot;https://opendata.ecdc.europa.eu/covid19/hospitalicuadmissionrates/csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8-BOM&quot;</span>) <span class="co"># date of access: </span></span>
<span id="cb99-6"><a href="the-effect-of-vaccinations.html#cb99-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-7"><a href="the-effect-of-vaccinations.html#cb99-7" aria-hidden="true" tabindex="-1"></a>data_vaccine <span class="ot">&lt;-</span> utils<span class="sc">::</span><span class="fu">read.csv</span>(<span class="st">&quot;https://opendata.ecdc.europa.eu/covid19/vaccine_tracker/csv&quot;</span>, <span class="at">na.strings =</span> <span class="st">&quot;&quot;</span>, <span class="at">fileEncoding =</span> <span class="st">&quot;UTF-8-BOM&quot;</span>) <span class="co"># date of access:</span></span></code></pre></div>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="the-effect-of-vaccinations.html#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_weekly_testing, <span class="st">&quot;data/ECDC_testing.csv&quot;</span>)</span>
<span id="cb100-2"><a href="the-effect-of-vaccinations.html#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_hospital, <span class="st">&quot;data/ECDC_hospital.csv&quot;</span>)</span>
<span id="cb100-3"><a href="the-effect-of-vaccinations.html#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="fu">write.csv</span>(data_vaccine, <span class="st">&quot;data/EVDV_vaccine.csv&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="the-effect-of-vaccinations.html#cb101-1" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ECDC_testing.csv&quot;</span>)</span>
<span id="cb101-2"><a href="the-effect-of-vaccinations.html#cb101-2" aria-hidden="true" tabindex="-1"></a>data_hospital <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/ECDC_hospital.csv&quot;</span>)</span>
<span id="cb101-3"><a href="the-effect-of-vaccinations.html#cb101-3" aria-hidden="true" tabindex="-1"></a>data_vaccine <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="st">&quot;data/EVDV_vaccine.csv&quot;</span>)</span></code></pre></div>
<div id="trimming-joining-dataframes" class="section level2" number="9.1">
<h2><span class="header-section-number">9.1</span> Trimming &amp; Joining dataframes</h2>
<p>For the visualization it’s necessary to have a single dataframe containing all the variables needed for the plot. I’m planning to join the needed columns of the dataframes by their matching <em>date</em> and <em>country</em> rows.<br />
All the dataframes have the date in a year week format (YYYY-Www). But the column names for date and country columns vary, and the hospital dataset only has country column values as whole names, while vaccine only has it as country codes. Luckily the testing dataset has both. Also the Hospital admission dataset has daily covid related occupancy and weekly new COVID-19 related patients admissioned per 100k population. Only the weekly hospitol and ICU admissions are needed for this report.</p>
<p>The variables needed for the visualization are:</p>
<ul>
<li>year_week - the date in YYYY-Www format<br />
</li>
<li>country - name of country<br />
</li>
<li>region - country code<br />
</li>
<li>new_cases - Number of new confirmed cases<br />
</li>
<li>population - population of country<br />
</li>
<li>value - Number of patients or new admissions per 100 000 population<br />
</li>
<li>Indicator - If hospital occupancy is either:
<ul>
<li>Daily hospital occupancy (number of COVID-19 patients in hospital on a given day)<br />
</li>
<li>Daily ICU occupancy (number of COVID-19 patients in ICU on a given day)<br />
</li>
<li>Weekly new hospital admissions per 100k (weekly rate of new admissions of COVID-19 patients per 100 000 population)<br />
</li>
<li>Weekly new ICU new admissions of COVID-19 patients per 100k.<br />
</li>
</ul></li>
<li>FirstDose - Number of first dose vaccine administered to individuals during the reporting week.<br />
</li>
<li>SecondDose - Number of second dose vaccine administered to individuals during the reporting week.<br />
</li>
<li>Vaccine - Name of vaccine
<ul>
<li>COM = Comirnaty – Pfizer/BioNTech<br />
</li>
<li>MOD = mRNA-1273 – Moderna<br />
</li>
<li>CN = BBIBV-CorV – CNBG<br />
</li>
<li>SIN = Coronavac – Sinovac<br />
</li>
<li>SPU = Sputnik V - Gamaleya Research Institute<br />
</li>
<li>AZ = AZD1222 – AstraZeneca<br />
</li>
<li>UNK = UNKNOWN<br />
</li>
</ul></li>
<li>TargetGroup - Target group for vaccination.</li>
</ul>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="the-effect-of-vaccinations.html#cb102-1" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="ot">&lt;-</span> data_weekly_testing <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(level <span class="sc">==</span> <span class="st">&quot;national&quot;</span>)</span>
<span id="cb102-2"><a href="the-effect-of-vaccinations.html#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="the-effect-of-vaccinations.html#cb102-3" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="ot">&lt;-</span> data_weekly_testing <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(country, </span>
<span id="cb102-4"><a href="the-effect-of-vaccinations.html#cb102-4" aria-hidden="true" tabindex="-1"></a>                                                             country_code, </span>
<span id="cb102-5"><a href="the-effect-of-vaccinations.html#cb102-5" aria-hidden="true" tabindex="-1"></a>                                                             year_week, </span>
<span id="cb102-6"><a href="the-effect-of-vaccinations.html#cb102-6" aria-hidden="true" tabindex="-1"></a>                                                             new_cases, </span>
<span id="cb102-7"><a href="the-effect-of-vaccinations.html#cb102-7" aria-hidden="true" tabindex="-1"></a>                                                             population)</span>
<span id="cb102-8"><a href="the-effect-of-vaccinations.html#cb102-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-9"><a href="the-effect-of-vaccinations.html#cb102-9" aria-hidden="true" tabindex="-1"></a>data_hospital <span class="ot">&lt;-</span> data_hospital <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(country,</span>
<span id="cb102-10"><a href="the-effect-of-vaccinations.html#cb102-10" aria-hidden="true" tabindex="-1"></a>                                                 year_week,</span>
<span id="cb102-11"><a href="the-effect-of-vaccinations.html#cb102-11" aria-hidden="true" tabindex="-1"></a>                                                 value,</span>
<span id="cb102-12"><a href="the-effect-of-vaccinations.html#cb102-12" aria-hidden="true" tabindex="-1"></a>                                                 indicator)</span>
<span id="cb102-13"><a href="the-effect-of-vaccinations.html#cb102-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-14"><a href="the-effect-of-vaccinations.html#cb102-14" aria-hidden="true" tabindex="-1"></a>data_hospital <span class="ot">&lt;-</span> data_hospital <span class="sc">%&gt;%</span> </span>
<span id="cb102-15"><a href="the-effect-of-vaccinations.html#cb102-15" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">filter</span>(indicator <span class="sc">==</span> <span class="st">&quot;Weekly new ICU admissions per 100k&quot;</span> <span class="sc">|</span> indicator <span class="sc">==</span> <span class="st">&quot;Weekly new hospital admissions per 100k&quot;</span>)</span>
<span id="cb102-16"><a href="the-effect-of-vaccinations.html#cb102-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-17"><a href="the-effect-of-vaccinations.html#cb102-17" aria-hidden="true" tabindex="-1"></a>data_vaccine <span class="ot">&lt;-</span> data_vaccine <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">select</span>(YearWeekISO,</span>
<span id="cb102-18"><a href="the-effect-of-vaccinations.html#cb102-18" aria-hidden="true" tabindex="-1"></a>                                               Region,</span>
<span id="cb102-19"><a href="the-effect-of-vaccinations.html#cb102-19" aria-hidden="true" tabindex="-1"></a>                                               FirstDose,</span>
<span id="cb102-20"><a href="the-effect-of-vaccinations.html#cb102-20" aria-hidden="true" tabindex="-1"></a>                                               SecondDose,</span>
<span id="cb102-21"><a href="the-effect-of-vaccinations.html#cb102-21" aria-hidden="true" tabindex="-1"></a>                                               Vaccine,</span>
<span id="cb102-22"><a href="the-effect-of-vaccinations.html#cb102-22" aria-hidden="true" tabindex="-1"></a>                                               TargetGroup)</span></code></pre></div>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="the-effect-of-vaccinations.html#cb103-1" aria-hidden="true" tabindex="-1"></a>data_vaccine <span class="ot">&lt;-</span> data_vaccine <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">rename</span>(<span class="at">year_week =</span> YearWeekISO, <span class="at">country_code =</span> Region)</span></code></pre></div>
<p>The three datasets contain different ranges of dates. If the datasets are to be joined the dataset with the largest date range needs te be selected. In this case that’s the Hospital admissions dataset. by joining the other datasets to the hospital admissions dataset <code>NA</code> values will be implemented for variables where no data is available for that date.</p>
<p>Table 1: The earliest and latest dates of each dataset. The hospital admissions dataset contains the longest date range. However it just doesn’t contain the 2 latest weeks that the Vaccinations dataset does contain.</p>
<table class=" lightable-material" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
dataset
</th>
<th style="text-align:left;">
Earliest.date
</th>
<th style="text-align:left;">
Latest.date
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
Testing
</td>
<td style="text-align:left;">
2020-W01
</td>
<td style="text-align:left;">
2021-W31
</td>
</tr>
<tr>
<td style="text-align:left;">
Hospital admissions
</td>
<td style="text-align:left;">
2019-W49
</td>
<td style="text-align:left;">
2021-W31
</td>
</tr>
<tr>
<td style="text-align:left;">
Vaccinations
</td>
<td style="text-align:left;">
2020-W52
</td>
<td style="text-align:left;">
2021-W32
</td>
</tr>
</tbody>
</table>
<p>The vaccine dataset has its data for <code>FirstDose</code> and <code>SecondDose</code> split between different vaccines and targetgroups. This will cause duplicate datapoints in the <code>new_cases</code> and <code>value</code> rows if the dataset are joined. So the vaccine dataset is collapsed so that <code>FirstDose</code> and <code>SecondDose</code> represent the total vaccinations given that week, no matter which vaccination or in which targetgroup.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="the-effect-of-vaccinations.html#cb104-1" aria-hidden="true" tabindex="-1"></a>sum_firstdose_before <span class="ot">&lt;-</span> data_vaccine<span class="sc">$</span>FirstDose <span class="sc">%&gt;%</span> <span class="fu">sum</span>()</span></code></pre></div>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="the-effect-of-vaccinations.html#cb105-1" aria-hidden="true" tabindex="-1"></a>data_vaccine <span class="ot">&lt;-</span> data_vaccine <span class="sc">%&gt;%</span></span>
<span id="cb105-2"><a href="the-effect-of-vaccinations.html#cb105-2" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">group_by</span>(year_week, country_code) <span class="sc">%&gt;%</span></span>
<span id="cb105-3"><a href="the-effect-of-vaccinations.html#cb105-3" aria-hidden="true" tabindex="-1"></a>    dplyr<span class="sc">::</span><span class="fu">transmute</span>(<span class="st">&quot;year_week&quot;</span> <span class="ot">=</span> year_week,</span>
<span id="cb105-4"><a href="the-effect-of-vaccinations.html#cb105-4" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;country_code&quot;</span> <span class="ot">=</span> country_code,</span>
<span id="cb105-5"><a href="the-effect-of-vaccinations.html#cb105-5" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;FirstDose&quot;</span> <span class="ot">=</span> <span class="fu">sum</span>(FirstDose, <span class="at">na.rm =</span> T),</span>
<span id="cb105-6"><a href="the-effect-of-vaccinations.html#cb105-6" aria-hidden="true" tabindex="-1"></a>                     <span class="st">&quot;SecondDose&quot;</span> <span class="ot">=</span> <span class="fu">sum</span>(SecondDose, <span class="at">na.rm =</span> T)) <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<p>There is no change in the sum of <code>FirstDose</code>, so the collapsing of the data went correctly.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="the-effect-of-vaccinations.html#cb106-1" aria-hidden="true" tabindex="-1"></a>data_vaccine<span class="sc">$</span>FirstDose <span class="sc">%&gt;%</span> <span class="fu">sum</span>() <span class="sc">==</span> sum_firstdose_before</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>There seem to be duplicate rows in the testing dataset, when the datasets get joined this could cause duplicate datapoints.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="the-effect-of-vaccinations.html#cb108-1" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="sc">%&gt;%</span> <span class="fu">unique</span>() <span class="sc">%&gt;%</span> <span class="fu">nrow</span>() <span class="sc">==</span> data_weekly_testing <span class="sc">%&gt;%</span> <span class="fu">nrow</span>()</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="the-effect-of-vaccinations.html#cb110-1" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="ot">&lt;-</span> data_weekly_testing <span class="sc">%&gt;%</span> <span class="fu">unique</span>()</span></code></pre></div>
<div class="sourceCode" id="cb111"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb111-1"><a href="the-effect-of-vaccinations.html#cb111-1" aria-hidden="true" tabindex="-1"></a>data_covid <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(data_hospital, data_weekly_testing, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;country&quot;</span>, <span class="st">&quot;year_week&quot;</span>) )</span>
<span id="cb111-2"><a href="the-effect-of-vaccinations.html#cb111-2" aria-hidden="true" tabindex="-1"></a>data_covid <span class="ot">&lt;-</span> dplyr<span class="sc">::</span><span class="fu">left_join</span>(data_covid, data_vaccine, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">&quot;year_week&quot;</span>, <span class="st">&quot;country_code&quot;</span>))</span></code></pre></div>
<p>There is no diffrence between the sum of new_cases between the orginal dataset and the joined dataset so the join is succesful.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="the-effect-of-vaccinations.html#cb112-1" aria-hidden="true" tabindex="-1"></a>data_weekly_testing <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Netherlands&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(new_cases) <span class="sc">%&gt;%</span> <span class="fu">sum</span>(<span class="at">na.rm =</span> T) <span class="sc">-</span> data_covid <span class="sc">%&gt;%</span> dplyr<span class="sc">::</span><span class="fu">filter</span>(country <span class="sc">==</span> <span class="st">&quot;Netherlands&quot;</span>, indicator <span class="sc">==</span> <span class="st">&quot;Weekly new hospital admissions per 100k&quot;</span>) <span class="sc">%&gt;%</span> <span class="fu">pull</span>(new_cases) <span class="sc">%&gt;%</span> <span class="fu">sum</span>(<span class="at">na.rm =</span> T)</span></code></pre></div>
<pre><code>## [1] 0</code></pre>
</div>
<div id="visualization" class="section level2" number="9.2">
<h2><span class="header-section-number">9.2</span> Visualization</h2>
<p>Figure 1: Positive COVID-19 test (left Y-axis) and the cumaltive vaccine doses given (right Y-axis). In this plot it can be seen that during the “ramp up” of vaccine shots given (starting in march), positive COVID-19 cases went down. However it can also be seen that startig June the positive COVID-19 cases shot up, while the vaccinated population during this time was almost half the population.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-100-1.png" width="672" />
The effect of vaccines can’t really be seen in this plot. That is not to say that there is no effect, the true effect of vaccination could only really be shown in a graph like this once group immunity start having effect. Which is why proper precautions are important before group immunity starts having effect. However the effect of vaccination <em>is</em> visible in the occupancy of hospitals and ICU.</p>
<p>Figure 2: The effect of a vaccinated population on hospital and ICU admissions.it can be seen the the weekly hospital (x) and ICU addmissions (x) decrease while the vaccinated population increases.</p>
<p><img src="_main_files/figure-html/unnamed-chunk-101-1.png" width="672" /></p>
<p>In this plot it is seen that the weekly admission rate of the hospitals and ICU goes down as vaccinations start. And during the third wave (July 2021) the COVID-19 related hospital and ICU admissions is less compared to the occupancy before vaccination started.</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="the-effect-of-vaccinations.html#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">#Show the three highest new case amounts. (new cases has duplicate value&#39;s because of dose column)</span></span>
<span id="cb114-2"><a href="the-effect-of-vaccinations.html#cb114-2" aria-hidden="true" tabindex="-1"></a>cumsum_data_covid<span class="sc">$</span>new_cases <span class="sc">%&gt;%</span> <span class="fu">sort</span>() <span class="sc">%&gt;%</span> <span class="fu">tail</span>(<span class="at">n=</span><span class="dv">6</span>) </span>
<span id="cb114-3"><a href="the-effect-of-vaccinations.html#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="the-effect-of-vaccinations.html#cb114-4" aria-hidden="true" tabindex="-1"></a>max_cases <span class="ot">&lt;-</span> cumsum_data_covid <span class="sc">%&gt;%</span> </span>
<span id="cb114-5"><a href="the-effect-of-vaccinations.html#cb114-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Dose <span class="sc">==</span> <span class="st">&quot;FirstDose&quot;</span>, new_cases <span class="sc">==</span> <span class="dv">80594</span> <span class="sc">|</span> new_cases <span class="sc">==</span> <span class="dv">76154</span> <span class="sc">|</span> new_cases <span class="sc">==</span> <span class="dv">70155</span>) <span class="sc">%&gt;%</span></span>
<span id="cb114-6"><a href="the-effect-of-vaccinations.html#cb114-6" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">select</span>(year_week, new_cases, hospital, ICU)</span></code></pre></div>
<pre><code>## [1] 70155 70155 76154 76154 80594 80594</code></pre>
<p>Table 2: Overview of the three highest case counts over the period of January 2020 untill July 2021.</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="the-effect-of-vaccinations.html#cb116-1" aria-hidden="true" tabindex="-1"></a>kableExtra<span class="sc">::</span><span class="fu">kbl</span>(max_cases) <span class="sc">%&gt;%</span> </span>
<span id="cb116-2"><a href="the-effect-of-vaccinations.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  kableExtra<span class="sc">::</span><span class="fu">kable_material</span>(<span class="at">full_width =</span> <span class="cn">FALSE</span>)</span></code></pre></div>
<table class=" lightable-material" style="font-family: &quot;Source Sans Pro&quot;, helvetica, sans-serif; width: auto !important; margin-left: auto; margin-right: auto;">
<thead>
<tr>
<th style="text-align:left;">
year_week
</th>
<th style="text-align:right;">
new_cases
</th>
<th style="text-align:right;">
hospital
</th>
<th style="text-align:right;">
ICU
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
2020-W51
</td>
<td style="text-align:right;">
76154
</td>
<td style="text-align:right;">
1735
</td>
<td style="text-align:right;">
288
</td>
</tr>
<tr>
<td style="text-align:left;">
2020-W52
</td>
<td style="text-align:right;">
80594
</td>
<td style="text-align:right;">
1981
</td>
<td style="text-align:right;">
293
</td>
</tr>
<tr>
<td style="text-align:left;">
2021-W28
</td>
<td style="text-align:right;">
70155
</td>
<td style="text-align:right;">
277
</td>
<td style="text-align:right;">
34
</td>
</tr>
</tbody>
</table>
<p>The three highest new case counts. Two from the peak during December 2020, and one from the peak during July 2021. The difference in hospital and ICU admissions is clear and could be attributed to the vaccinated population.</p>

<div id="refs" class="references csl-bib-body hanging-indent">
<div class="csl-entry">
Fever, Dengue Hemorrhagic. n.d. <span>“Dengue and Dengue Hemorrhagic Fever | 1.”</span> <a href="https://www.cdc.gov/dengue/resources/denguedhf-information-for-health-care-practitioners_2009.pdf">https://www.cdc.gov/dengue/resources/denguedhf-information-for-health-care-practitioners_2009.pdf</a>.
</div>
<div class="csl-entry">
Krammer, Florian, Gavin J. D. Smith, Ron A. M. Fouchier, Malik Peiris, Katherine Kedzierska, Peter C. Doherty, Peter Palese, et al. 2018. <span>“Influenza.”</span> <em>Nature Reviews Disease Primers</em>. Nature Publishing Group. <a href="https://doi.org/10.1038/s41572-018-0002-y">https://doi.org/10.1038/s41572-018-0002-y</a>.
</div>
<div class="csl-entry">
Ritz, Christian, Florent Baty, Jens C Streibig, and Daniel Gerhard. 2015. <span>“Dose-Response Analysis Using r.”</span> <a href="https://doi.org/10.1371/journal.pone.0146021">https://doi.org/10.1371/journal.pone.0146021</a>.
</div>
</div>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="influenzadata-package.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "lunr",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

</body>

</html>
